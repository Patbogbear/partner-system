"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[965],{2965:function(e,a,l){l.r(a),l.d(a,{default:function(){return fe}});var s=l(821),t=l(4465),r=l(3907);const o={class:"header"},i={class:"row"},d={class:"col-xl-4"},c={class:"row"},n={class:"card"},u={class:"card-body text-center"},_=(0,s._)("div",{class:"mb-3"},[(0,s._)("span",{class:"avatar avatar-xl rounded",style:{"background-image":"url(./static/avatars/010m.jpg)"}})],-1),v={class:"card-title mb-1"},p={class:"text-secondary"},m={class:"form-fieldset"},b=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Change Password")],-1),w={class:"mb-3"},y=(0,s._)("label",{class:"form-label"},"New Password",-1),h={class:"mb-3"},f=(0,s._)("label",{class:"form-label"},"Confrim New Password",-1),g={class:"card-footer text-end"},k=["onSubmit"],q={class:"form-fieldset"},D=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Add user")],-1),U={class:"card-body"},E={class:"mb-3"},x=(0,s._)("label",{class:"form-label required"},"User name",-1),C={class:"mb-3"},H=(0,s._)("label",{class:"form-label required"},"Email address",-1),R={class:"mb-3"},P=(0,s._)("label",{class:"form-label required"},"Password",-1),S={class:"mb-3"},z=(0,s._)("label",{class:"form-label"},"Select Reader or Editor ",-1),A=(0,s._)("option",null,"Reader",-1),V=(0,s._)("option",null,"Editor",-1),N=(0,s._)("option",null,"Admin",-1),Z=[A,V,N],I={class:"card-footer text-end"},T=(0,s._)("div",{class:"card-footer text-end"},null,-1),M={class:"col-xl-8"},O={class:"card"},Y=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Recently Requests")],-1),K={class:"card-table table-responsive"},Q={class:"table table-vcenter"},B=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request User Name"),(0,s._)("th",null,"Request User Cluster & Title"),(0,s._)("th",null,"Request Data Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1),F={class:"text-secondary"},j={class:"text-secondary"},G={class:"text-secondary"},J=["onClick"],X=["onClick"],L=(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1),W={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"passwordToast"},$=(0,s.uE)('<div class="toast-header"><strong class="mr-auto">Notification</strong><button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close"><span aria-hidden="true"></span></button></div><div class="toast-body">Password updated successfully!</div>',2),ee=[$],ae={class:"user-authentication"},le={class:"card"},se=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"user-authenticate")],-1),te={class:"card-body"},re={class:"table-responsive"},oe={class:"table mb-0"},ie=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"User"),(0,s._)("th",null,"Role"),(0,s._)("th",null,"Action")])],-1),de=(0,s._)("option",{value:"",disabled:""},"Select User",-1),ce=["value"],ne=(0,s._)("option",{value:"Reader"},"Reader",-1),ue=(0,s._)("option",{value:"Editor"},"Editor",-1),_e=(0,s._)("option",{value:"Admin"},"Admin",-1),ve=[ne,ue,_e],pe=["value"],me={key:1},be=(0,s._)("td",null,[(0,s._)("select",{class:"form-select"},[(0,s._)("option",{value:"STATUS_CODE",selected:""},"Reader"),(0,s._)("option",{value:"JSON_BODY"},"Editor"),(0,s._)("option",{value:"HEADERS"},"Admin"),(0,s._)("option",{value:"TEXT_BODY"},"Text body")])],-1),we=(0,s._)("div",{class:"card-footer text-end"},[(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Make request")],-1);var ye={__name:"Personal",setup(e){const a=(0,r.oR)(),l=(0,s.Fl)((()=>a.getters.user)),A=(0,s.iH)(""),V=(0,s.iH)(""),N=(0,s.iH)([]),$=(0,s.iH)(""),ne=(0,s.iH)(""),ue=((0,s.iH)(""),(0,s.iH)("")),_e=(0,s.iH)(""),ye=(0,s.iH)(""),he=(0,s.iH)(""),fe=(0,s.iH)([]);(0,s.bv)((async()=>{await ge(),await Ee()}));const ge=async()=>{try{let{data:e}=await t.Z.get("/api/users");N.value=e,console.log(N)}catch(e){}},ke=()=>{A.value===V.value?t.Z.post("/api/users/edit-user/password",{newPassword:A.value}).then((e=>{console.log("password update successfully ")})).catch((e=>{console.log("failed to update password")})):alert("password not match")},qe=async()=>{try{await t.Z["delete"]("/api/users/delete/user",{data:{email:$.value}}),await ge(),$=null}catch(e){console.log("error deleting user:",e)}},De=async()=>{try{await t.Z.put("/api/users/edit/role",{email:$.value,updatedUserRole:ne.value}),await ge()}catch(e){console.log("error editor user role:",e)}},Ue=async()=>{try{await t.Z.post("/api/users/register",{name:he.value,email:ue.value,password:_e.value,identity:ye.value}),await ge()}catch(e){console.log("error add user ",e)}},Ee=async()=>{try{let{data:e}=await t.Z.get("/api/accessQuests/all-requests",{params:{status:"PENDING"}});fe.value=e,console.log(fe.value)}catch(e){console.log("error get request list",e)}},xe=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"APPROVED"})}catch(a){console.log("error approve request",a)}},Ce=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"DENIED"})}catch(a){console.log("error approve request",a)}};return(e,a)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",o,[(0,s._)("div",i,[(0,s._)("div",d,[(0,s._)("div",c,[(0,s._)("div",n,[(0,s._)("div",u,[_,(0,s._)("div",v,(0,s.zw)((0,s.SU)(l).name),1),(0,s._)("div",p,(0,s.zw)((0,s.SU)(l).identity),1)])])]),(0,s._)("form",null,[(0,s._)("fieldset",m,[b,(0,s._)("div",w,[y,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"new password","onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e)},null,512),[[s.nr,A.value]])]),(0,s._)("div",h,[f,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"confrim new password","onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e)},null,512),[[s.nr,V.value]])])]),(0,s._)("div",g,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onClick:a[2]||(a[2]=e=>ke())}," Change Password ")])]),(0,s._)("form",{onSubmit:(0,s.iM)(Ue,["prevent"])},[(0,s._)("fieldset",q,[D,(0,s._)("div",U,[(0,s._)("div",E,[x,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"name",class:"form-control",placeholder:"Enter name","onUpdate:modelValue":a[3]||(a[3]=e=>he.value=e),required:""},null,512),[[s.nr,he.value]])])]),(0,s._)("div",C,[H,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":a[4]||(a[4]=e=>ue.value=e),required:""},null,512),[[s.nr,ue.value]])])]),(0,s._)("div",R,[P,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":a[5]||(a[5]=e=>_e.value=e),required:""},null,512),[[s.nr,_e.value]])])]),(0,s._)("div",S,[z,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=e=>ye.value=e),required:""},Z,512),[[s.bM,ye.value]])])])]),(0,s._)("div",I,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:Ue}," Submit ",32)])]),T],40,k)]),(0,s._)("div",M,[(0,s._)("div",O,[Y,(0,s._)("div",K,[(0,s._)("table",Q,[B,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(fe.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,s.zw)(e.userId.email),1),(0,s._)("td",F,(0,s.zw)(e.userId.cluster)+"&"+(0,s.zw)(e.userId.identity),1),(0,s._)("td",j,(0,s.zw)(e.userId.name)+"申请了解"+(0,s.zw)(e.partnerId.third_partner_name)+"的"+(0,s.zw)(e.requestedContactField)+"区域联系人信息 ",1),(0,s._)("td",G,[(0,s._)("button",{onClick:a=>xe(e._id)}," approve request ",8,J),(0,s._)("button",{onClick:a=>Ce(e._id)}," deny request ",8,X)]),L])))),128))])])])])]),(0,s._)("div",W,ee,512),(0,s._)("div",ae,[(0,s.Uk)(" user-settings "),(0,s._)("div",le,[se,(0,s._)("div",te,[(0,s._)("div",re,[(0,s._)("table",oe,[ie,(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=e=>$.value=e)},[de,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,ce)))),128))],512),[[s.bM,$.value]])]),(0,s._)("td",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>ne.value=e)},ve,512),[[s.bM,ne.value]])]),(0,s._)("td",null,[$.value&&ne.value?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:De}," change Role ")):(0,s.kq)("",!0)])]),(0,s._)("tr",null,[(0,s._)("td",null,[N.value.length>0?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,"onUpdate:modelValue":a[9]||(a[9]=e=>$.value=e),class:"form-select"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,pe)))),128))],512)),[[s.bM,$.value]]):((0,s.wg)(),(0,s.iD)("div",me,"没有用户数据"))]),be,(0,s._)("td",null,[$.value?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:qe}," delete user ")):(0,s.kq)("",!0)])])])])])]),we])])])]))}};const he=ye;var fe=he}}]);
//# sourceMappingURL=965.70892dae.js.map