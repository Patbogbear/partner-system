"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[807],{5807:function(t,e,a){a.r(e),a.d(e,{default:function(){return S}});var n=a(821);const o={class:"home"},r={class:"navbar navbar-expand-lg bg-body-tertiary"},s={class:"container-fluid"},l=(0,n._)("a",{class:"navbar-brand",href:"#"},"Navbar",-1),c=(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1),i={class:"collapse navbar-collapse",id:"navbarSupportedContent"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},p={class:"nav-item"},u={class:"d-flex",role:"search"},b=(0,n._)("button",{class:"btn btn-outline-success",type:"submit"}," Search ",-1),_={class:"table table-bordered table-hover"},h=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"地区"),(0,n._)("th",{scope:"col"},"服务商类型"),(0,n._)("th",{scope:"col"},"服务商名称"),(0,n._)("th",{scope:"col"},"2B/2C"),(0,n._)("th",{scope:"col"},"公司所在地"),(0,n._)("th",{scope:"col"},"Vertical"),(0,n._)("th",{scope:"col"},"POC-HZ"),(0,n._)("th",{scope:"col"},"POC-SH"),(0,n._)("th",{scope:"col"},"POC-BJ"),(0,n._)("th",null,"编辑")])],-1),g={key:0},v={scope:"row"},m=(0,n._)("button",{class:"btn btn-primary",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"}}," detials ",-1),f={class:"dropdown"},w=["onClick"];function k(t,e,a,k,y,C){const x=(0,n.up)("alert"),D=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("nav",r,[(0,n._)("div",s,[l,c,(0,n._)("div",i,[(0,n._)("ul",d,[(0,n._)("li",p,[(0,n._)("a",{class:"nav-link active","aria-current":"page",onClick:e[0]||(e[0]=t=>C.goto_add())},"Add New")])]),(0,n._)("form",u,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>y.filterInput=t),class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"},null,512),[[n.nr,y.filterInput]]),b]),(0,n._)("button",{class:"btn btn-outline-success",onClick:e[2]||(e[2]=t=>C.exportToCSV())}," export "),(0,n._)("div",{onClick:e[3]||(e[3]=t=>C.logOut())},"logout")])])]),t.alert?((0,n.wg)(),(0,n.j4)(x,{key:0,message:t.alert},null,8,["message"])):(0,n.kq)("",!0),(0,n._)("table",_,[h,C.user?((0,n.wg)(),(0,n.iD)("tbody",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(C.filteredData(y.partners,y.filterInput),(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t._id},[(0,n._)("th",v,(0,n.zw)(t.cluster),1),(0,n._)("td",null,(0,n.zw)(t.third_partner_type),1),(0,n._)("td",null,(0,n.zw)(t.third_partner_name),1),(0,n._)("td",null,(0,n.zw)(t.b2b_or_b2c),1),(0,n._)("td",null,(0,n.zw)(t.partner_location),1),(0,n._)("td",null,(0,n.zw)(t.vertical),1),(0,n._)("td",null,(0,n.zw)(t.POC_HZ),1),(0,n._)("td",null,(0,n.zw)(t.POC_SH),1),(0,n._)("td",null,(0,n.zw)(t.POC_BJ),1),(0,n._)("td",null,["Super-Admin"==C.user.identity?((0,n.wg)(),(0,n.j4)(D,{key:0,class:"single-partner",to:"/single-partner/"+t._id},{default:(0,n.w5)((()=>[m])),_:2},1032,["to"])):(0,n.kq)("",!0),(0,n._)("div",f,["Super-Admin"==C.user.identity?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-dark",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"},"data-bs-toggle":"dropdown",onClick:e=>C.deleteData(t._id)}," delete ",8,w)):(0,n.kq)("",!0)])])])))),128))])):(0,n.kq)("",!0)])])}a(7658);var y=a(4465),C={name:"index",components:{},data(){return{partners:[],filterInput:[],exportsData:[]}},computed:{user(){return console.log(this.$store.getters.user),this.$store.getters.user}},created(){this.getData()},methods:{filteredData(t,e){const a=new RegExp(e,"i");return t.filter((t=>Object.values(t).some((t=>"string"===typeof t&&a.test(t)))))},getData(){y.Z.get("api/partners").then((t=>{this.partners=t.data,console.log(this.partners)})).catch((t=>console.log(t)))},deleteData(t){y.Z["delete"]("api/partners/delete/"+t).then((t=>{console.log(333),this.getData()}))},exportToCSV(){y.Z.get("api/partners/export").then((t=>{console.log(t.data),this.exportsData=t.data;const e=[],a=Object.keys(this.exportsData[0]);e.push(a.join(","));for(const l of this.exportsData){const t=[];for(const e of a){const a=void 0!==l[e]?l[e]:"";t.push(a)}e.push(t.join(","))}const n=e.join("\n"),o=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),s=URL.createObjectURL(o);r.href=s,r.download="data.csv",r.click(),URL.revokeObjectURL(s)})).catch((t=>console.log(t)))},logOut(){localStorage.removeItem("userToken"),this.$store.dispatch("clearCurrentState"),this.$router.push({path:"/login"})},goto_add(){this.$router.push({path:"/add"})}}},x=a(3744);const D=(0,x.Z)(C,[["render",k]]);var S=D}}]);
//# sourceMappingURL=807.2e9c80c5.js.map