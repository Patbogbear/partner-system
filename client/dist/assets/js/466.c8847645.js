"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[466],{8712:function(e,s,t){t.d(s,{Z:function(){return f}});t(7658);var o=t(8830),r=t(1120),a=t(821);const n=e=>((0,a.dD)("data-v-9522ce64"),e=e(),(0,a.Cn)(),e),l={"aria-live":"polite","aria-atomic":"true",style:{position:"relative","min-height":"200px"}},i={style:{position:"absolute",top:"0",right:"0"}},c={class:"toast-header"},d={class:"mr-auto"},u=n((()=>(0,a._)("small",{class:"text-muted"},"just now",-1))),p=n((()=>(0,a._)("span",{"aria-hidden":"true"},"Ã—",-1))),m=[p];var g={__name:"ToastComponent",props:{message:{type:String,default:""},statusCode:{type:Number,default:200}},setup(e,{expose:s}){const t=e,o=(0,a.iH)(!1),r=(0,a.Fl)((()=>{switch(t.statusCode){case 200:return"alert-success";case 400:return"alert-warning";case 403:return"alert-secondary";case 404:return"alert-danger";case 500:return"alert-danger";default:return"alert-primary"}})),n=()=>{(0,a.Y3)((()=>{let e=document.querySelector(".toast"),s=new bootstrap.Toast(e);s.show(),o.value=!0}))},p=()=>{let e=document.querySelector(".toast"),s=new bootstrap.Toast(e);s.hide(),o.value=!1};return s({show:n,closeToast:p}),(s,t)=>((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",i,[(0,a._)("div",{class:(0,a.C_)(["toast alert",(0,a.SU)(r)]),role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,a._)("div",c,[(0,a._)("strong",d,(0,a.zw)(e.message),1),u,(0,a._)("button",{type:"button",class:"ml-2 mb-1 close","data-dismiss":"toast",onClick:p,"aria-label":"Close"},m)])],2)])]))}},h=t(3744);const v=(0,h.Z)(g,[["__scopeId","data-v-9522ce64"]]);var y=v;function _(){const e=(e,s)=>{console.log("Inside showToast function");const t=document.createElement("div");document.body.appendChild(t);const o=(0,a.ri)(y,{message:e,statusCode:s}),r=o.mount(t);console.log("Toast added to body"),r&&"function"===typeof r.show&&r.show(),setTimeout((()=>{o.unmount(),document.body.removeChild(t),console.log("Toast removed from body")}),3e4)};return{showToast:e}}var b=_;o.Z.interceptors.request.use((e=>(localStorage.userToken&&(e.headers.Authorization=localStorage.userToken),e)),(e=>Promise.reject(e))),o.Z.interceptors.response.use((e=>{const{showToast:s}=b();return e.data&&e.data.message&&s(e.data.message,e.status),e}),(async e=>{const{showToast:s}=b();if(console.log("error response:",e.response),e.response){const{status:t,data:o}=e.response,a=o.message||o.error||"An error occurred.";401===t?(s("Token invalid. Please login again.",t,"error"),localStorage.removeItem("userToken"),r.Z.push("/login")):s(a,t)}else s("Network error. Please try again.","error");return Promise.reject(e)}));var f=o.Z},3744:function(e,s){s.Z=(e,s)=>{const t=e.__vccOpts||e;for(const[o,r]of s)t[o]=r;return t}},5466:function(e,s,t){t.r(s),t.d(s,{default:function(){return k}});var o=t(821);const r=e=>((0,o.dD)("data-v-262485d9"),e=e(),(0,o.Cn)(),e),a={class:"col-md-12 login"},n=r((()=>(0,o._)("div",{class:"login-image"},null,-1))),l=r((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("h3",{class:"card-title"},"Login")],-1))),i={class:"card-body"},c={class:"mb-3"},d=r((()=>(0,o._)("label",{class:"form-label required"},"Email address",-1))),u=r((()=>(0,o._)("small",{class:"form-hint"},"We'll never share your email with anyone else.",-1))),p={class:"mb-3"},m=r((()=>(0,o._)("label",{class:"form-label required"},"Password",-1))),g={class:"card-footer text-end"},h=r((()=>(0,o._)("span",{class:"p-1 text-primary-emphasis bs-primary-bg-subtle"},"Register here",-1)));function v(e,s,t,r,v,y){return(0,o.wg)(),(0,o.iD)("div",a,[n,(0,o._)("form",{class:"card",onSubmit:s[5]||(s[5]=(0,o.iM)((e=>y.logUser()),["prevent"]))},[l,(0,o._)("div",i,[(0,o._)("div",c,[d,(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":s[0]||(s[0]=e=>v.loginUser.email=e)},null,512),[[o.nr,v.loginUser.email]]),u])]),(0,o._)("div",p,[m,(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":s[1]||(s[1]=e=>v.loginUser.password=e)},null,512),[[o.nr,v.loginUser.password]])]),(0,o._)("span",{style:{color:"red"},onClick:s[2]||(s[2]=e=>y.gotoRetrive())}," forget password? click here to reset your password ")])]),(0,o._)("div",g,[(0,o._)("span",{class:"go_register",onClick:s[3]||(s[3]=e=>y.gotoRegister())},[(0,o.Uk)(" Does't have a account yet? "),h]),(0,o._)("button",{type:"submit",class:"btn btn-primary",onOnclick:s[4]||(s[4]=e=>y.logUser())}," Submit ",32)])],32)])}t(7658);var y=t(8712),_=t(6245),b={name:"register",components:{},data(){return{loginUser:{name:"",email:"",password:"",identity:""}}},methods:{logUser(){y.Z.post("/api/users/login",this.loginUser).then((e=>{console.log("success");const{token:s}=e.data;localStorage.setItem("userToken",s);const t=(0,_.Z)(s);console.log(s),this.$store.dispatch("setAuthenticated",!this.isEmpty(t)),this.$store.dispatch("setUser",t),this.$router.push({path:"/"})}))},gotoRegister(){this.$router.push({path:"/register"})},gotoRetrive(){this.$router.push({path:"/retrive"})},isEmpty(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}}},f=t(3744);const w=(0,f.Z)(b,[["render",v],["__scopeId","data-v-262485d9"]]);var k=w}}]);
//# sourceMappingURL=466.c8847645.js.map