"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[710],{7956:function(e,a,l){l.r(a),l.d(a,{default:function(){return ha}});var s=l(821),t=l(3105),d=l(3907);const r=e=>((0,s.dD)("data-v-3a8d4bb7"),e=e(),(0,s.Cn)(),e),i={class:"container-xl"},n={class:"header"},o={class:"row"},c={class:"col-xl-4 px-3"},u={class:"row"},b={class:"card"},m={class:"card-body text-center"},_=r((()=>(0,s._)("div",{class:"mb-3"},[(0,s._)("span",{class:"avatar avatar-xl rounded"},"default")],-1))),v={class:"card-title mb-1"},p={class:"text-muted"},y=r((()=>(0,s._)("div",null,null,-1))),w={class:"col-xl-4 px-3 d-flex align-items-center"},g={class:"row"},f=r((()=>(0,s._)("a",{class:"btn btn-secondary btn-sm","data-bs-toggle":"modal","data-bs-target":"#modal-team"}," Change Password ",-1))),h={class:"modal modal-blur fade",id:"modal-team",tabindex:"-1",role:"dialog","aria-hidden":"true"},x={class:"modal-dialog modal-dialog-centered",role:"document"},k={class:"modal-content"},q={class:"modal-body"},D={class:"form-fieldset"},U=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Change Password"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),C={class:"mb-3"},S=r((()=>(0,s._)("label",{class:"form-label"},"New Password",-1))),I={class:"mb-3"},P=r((()=>(0,s._)("label",{class:"form-label"},"Confrim New Password",-1))),H={class:"card-footer text-end"},z=r((()=>(0,s._)("a",{class:"btn btn-secondary btn-sm","data-bs-toggle":"modal","data-bs-target":"#addUser"}," Add User ",-1))),A={class:"modal modal-blur fade",id:"addUser",tabindex:"-1",role:"dialog","aria-hidden":"true"},R={class:"modal-dialog modal-dialog-centered",role:"document"},V={class:"modal-content"},Z={class:"modal-body"},E=["onSubmit"],L={class:"form-fieldset"},N=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Add user"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),T={class:"card-body"},M={class:"mb-3"},O=r((()=>(0,s._)("label",{class:"form-label required"},"User name",-1))),F={class:"mb-3"},K=r((()=>(0,s._)("label",{class:"form-label required"},"Email address",-1))),Q={class:"mb-3"},Y=r((()=>(0,s._)("label",{class:"form-label required"},"Password",-1))),B={class:"mb-3"},G=r((()=>(0,s._)("label",{class:"form-label"},"Sales Poc or Team-Leader",-1))),J=r((()=>(0,s._)("option",null,"Sales",-1))),$=r((()=>(0,s._)("option",null,"Pod-Leader",-1))),j=r((()=>(0,s._)("option",null,"Team-Leader",-1))),W=[J,$,j],X={class:"mb-3"},ee=r((()=>(0,s._)("label",{class:"form-label"},"Cluster",-1))),ae=r((()=>(0,s._)("option",null,"SH",-1))),le=r((()=>(0,s._)("option",null,"HZ",-1))),se=r((()=>(0,s._)("option",null,"BJ",-1))),te=[ae,le,se],de={class:"card-footer text-end"},re=r((()=>(0,s._)("div",{class:"card-footer text-end"},null,-1))),ie={class:"col-xl-4 px-3 d-flex align-items-center"},ne={class:"row"},oe={class:"row"},ce=r((()=>(0,s._)("a",{class:"btn btn-secondary btn-sm custom-btn","data-bs-toggle":"modal","data-bs-target":"#deleteUser"}," Delete User ",-1))),ue={class:"modal modal-blur fade",id:"deleteUser",tabindex:"-1",role:"dialog","aria-hidden":"true"},be={class:"modal-dialog modal-dialog-centered",role:"document"},me={class:"modal-content"},_e={class:"modal-body"},ve=["onSubmit"],pe={class:"form-fieldset"},ye=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Delete user"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),we={class:"card-body"},ge={class:"mb-3"},fe=r((()=>(0,s._)("label",{class:"form-label"},"Select Users ",-1))),he=r((()=>(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),xe=r((()=>(0,s._)("option",{disabled:""},"Select User",-1))),ke=["value"],qe={class:"card-footer text-end"},De=r((()=>(0,s._)("div",{class:"card-footer text-end"},null,-1))),Ue=r((()=>(0,s._)("a",{class:"btn btn-secondary btn-sm","data-bs-toggle":"modal","data-bs-target":"#userAuthenticate"}," User authenticate ",-1))),Ce={class:"modal modal-blur fade",id:"userAuthenticate",tabindex:"-1",role:"dialog","aria-hidden":"true"},Se={class:"modal-dialog modal-dialog-centered",role:"document"},Ie={class:"modal-content"},Pe={class:"modal-body"},He=["onSubmit"],ze={class:"form-fieldset"},Ae=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"User authenticate")],-1))),Re={class:"card-body"},Ve={class:"mb-3"},Ze=r((()=>(0,s._)("label",{class:"form-label"},"Select Users ",-1))),Ee=r((()=>(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),Le=r((()=>(0,s._)("option",{disabled:""},"Select User",-1))),Ne=["value"],Te=r((()=>(0,s._)("label",{class:"form-label"},"Select Role",-1))),Me=r((()=>(0,s._)("option",{value:"Sales"},"Sales",-1))),Oe=r((()=>(0,s._)("option",{value:"Pod-Leader"},"Pod-Leader/POC",-1))),Fe=r((()=>(0,s._)("option",{value:"Team-Leader"}," Team-Leader ",-1))),Ke=[Me,Oe,Fe],Qe={class:"card-footer text-end"},Ye=r((()=>(0,s._)("div",{class:"card-footer text-end"},null,-1))),Be={class:"row"},Ge={key:0,class:"col-xl-12"},Je={class:"card"},$e=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Recently Requests")],-1))),je={class:"card-table table-responsive"},We={class:"table table-vcenter"},Xe=r((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request User Name"),(0,s._)("th",null,"Request User Cluster & Title"),(0,s._)("th",null,"Request Data Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1))),ea={class:"text-secondary"},aa={class:"text-secondary"},la={class:"text-secondary"},sa=["onClick"],ta=["onClick"],da=r((()=>(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1))),ra={key:1,class:"col-xl-12"},ia={class:"card"},na=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Requests Feedback")],-1))),oa={class:"card-table table-responsive"},ca={class:"table table-vcenter"},ua=r((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request Partner Name"),(0,s._)("th",null,"Request Time"),(0,s._)("th",null,"Request Partner Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1))),ba={class:"text-secondary"},ma={class:"text-secondary"},_a={class:"text-secondary"},va={key:0,class:"btn btn-warning btn-sm",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"}},pa={key:1,class:"btn btn-primary",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"}},ya=r((()=>(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1)));var wa={__name:"Personal",setup(e){const a=(0,d.oR)(),l=(0,s.Fl)((()=>a.getters.user)),r=(0,s.iH)(""),J=(0,s.iH)(""),$=(0,s.iH)([]),j=(0,s.iH)(""),ae=(0,s.iH)(""),le=(0,s.iH)(""),se=((0,s.iH)(""),(0,s.iH)("")),Me=(0,s.iH)(""),Oe=(0,s.iH)(""),Fe=(0,s.iH)(""),wa=(0,s.iH)(""),ga=(0,s.iH)([]);(0,s.bv)((async()=>{await fa(),await Da(l)}));const fa=async()=>{try{let{data:e}=await t.Z.get("/api/users");$.value=e}catch(e){}},ha=()=>{r.value===J.value?t.Z.post("/api/users/edit-user/password",{newPassword:r.value}).then((e=>{console.log("password update successfully ")})).catch((e=>{console.log("failed to update password")})):alert("password not match")},xa=async()=>{try{await t.Z.delete("/api/users/delete/user",{data:{email:le.value}}),await fa(),le=null}catch(e){console.log("error deleting user:",e)}},ka=async()=>{try{await t.Z.put("/api/users/edit/role",{email:j.value,updatedUserRole:ae.value}),await fa()}catch(e){console.log("error editor user role:",e)}},qa=async()=>{try{await t.Z.post("/api/users/register",{name:Fe.value,email:se.value,password:Me.value,cluster:wa.value,identity:Oe.value}),await fa()}catch(e){console.log("error add user ",e)}},Da=async e=>{try{if("Super-Admin"===e.value.identity){let{data:e}=await t.Z.get("/api/accessQuests/all-requests",{params:{status:"PENDING"}});ga.value=e,console.log(ga)}else if("Sales"===e.value.identity||"Team-Leader"===e.value.identity){let{data:a}=await t.Z.get(`/api/accessQuests/user-requests/${e.value.id}`);ga.value=a}}catch(a){console.log("error get request list",a)}},Ua=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"APPROVED"})}catch(a){console.log("error approve request",a)}},Ca=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"DENIED"})}catch(a){console.log("error approve request",a)}};return(e,a)=>((0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",n,[(0,s._)("div",o,[(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("div",b,[(0,s._)("div",m,[_,(0,s._)("div",v,(0,s.zw)(l.value.name),1),(0,s._)("div",p,(0,s.zw)(l.value.identity),1),y])])])]),(0,s._)("div",w,[(0,s._)("div",g,[f,(0,s._)("div",h,[(0,s._)("div",x,[(0,s._)("div",k,[(0,s._)("div",q,[(0,s._)("form",null,[(0,s._)("fieldset",D,[U,(0,s._)("div",C,[S,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"new password","onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e)},null,512),[[s.nr,r.value]])]),(0,s._)("div",I,[P,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"confrim new password","onUpdate:modelValue":a[1]||(a[1]=e=>J.value=e)},null,512),[[s.nr,J.value]])])]),(0,s._)("div",H,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onClick:a[2]||(a[2]=e=>ha())}," Change Password ")])])])])])]),z,(0,s._)("div",A,[(0,s._)("div",R,[(0,s._)("div",V,[(0,s._)("div",Z,["Super-Admin"===l.value.identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(qa,["prevent"])},[(0,s._)("fieldset",L,[N,(0,s._)("div",T,[(0,s._)("div",M,[O,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"name",class:"form-control",placeholder:"Enter name","onUpdate:modelValue":a[3]||(a[3]=e=>Fe.value=e),required:""},null,512),[[s.nr,Fe.value]])])]),(0,s._)("div",F,[K,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":a[4]||(a[4]=e=>se.value=e),required:""},null,512),[[s.nr,se.value]])])]),(0,s._)("div",Q,[Y,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":a[5]||(a[5]=e=>Me.value=e),required:""},null,512),[[s.nr,Me.value]])])]),(0,s._)("div",B,[G,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=e=>Oe.value=e),required:""},W,512),[[s.bM,Oe.value]])])]),(0,s._)("div",X,[ee,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=e=>wa.value=e),required:""},te,512),[[s.bM,wa.value]])])])]),(0,s._)("div",de,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:qa}," Add User ",32)])]),re],40,E)):(0,s.kq)("",!0)])])])])])]),(0,s._)("div",ie,[(0,s._)("div",ne,[(0,s._)("div",oe,[ce,(0,s._)("div",ue,[(0,s._)("div",be,[(0,s._)("div",me,[(0,s._)("div",_e,["Super-Admin"===l.value.identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(xa,["prevent"])},[(0,s._)("fieldset",pe,[ye,(0,s._)("div",we,[(0,s._)("div",ge,[fe,he,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>le.value=e)},[xe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,ke)))),128))],512),[[s.bM,le.value]])])])]),(0,s._)("div",qe,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:xa}," Delete User ",32)])]),De],40,ve)):(0,s.kq)("",!0)])])])]),Ue,(0,s._)("div",Ce,[(0,s._)("div",Se,[(0,s._)("div",Ie,[(0,s._)("div",Pe,["Super-Admin"===l.value.identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(ka,["prevent"])},[(0,s._)("fieldset",ze,[Ae,(0,s._)("div",Re,[(0,s._)("div",Ve,[Ze,Ee,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[9]||(a[9]=e=>j.value=e)},[Le,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,Ne)))),128))],512),[[s.bM,j.value]])]),Te,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[10]||(a[10]=e=>ae.value=e)},Ke,512),[[s.bM,ae.value]])])])]),(0,s._)("div",Qe,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:ka}," Change Role ",32)])]),Ye],40,He)):(0,s.kq)("",!0)])])])])])])]),(0,s._)("div",Be,["Super-Admin"===l.value.identity||"Team-Leader"===l.value.identity?((0,s.wg)(),(0,s.iD)("div",Ge,[(0,s._)("div",Je,[$e,(0,s._)("div",je,[(0,s._)("table",We,[Xe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ga.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id+new Date},[(0,s._)("td",null,(0,s.zw)(e.userId&&e.userId.email?e.userId.email:"user has been delete"),1),(0,s._)("td",ea,(0,s.zw)(e.userId&&e.userId.Cluster?e.userId.Cluster:"user has been delete")+"&"+(0,s.zw)(e.userId&&e.userId.identity?e.userId.identity:"user has been delete"),1),(0,s._)("td",aa,(0,s.zw)(e.userId&&e.userId.name?e.userId.name:"user has been delete")+"申请了解"+(0,s.zw)(e.partnerId?e.partnerId.third_partner_name:"unknown partner")+"的"+(0,s.zw)(e.requestedContactField)+"区域联系人信息 ",1),(0,s._)("td",la,[(0,s._)("button",{class:"btn btn-primary btn-sm",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"},onClick:a=>Ua(e._id)}," approve request ",8,sa),(0,s._)("button",{class:"btn btn-warning",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"},onClick:a=>Ca(e._id)}," deny request ",8,ta)]),da])))),128))])])])])):(0,s.kq)("",!0),"Sales"===l.value.identity||"Team-Leader"===l.value.identity?((0,s.wg)(),(0,s.iD)("div",ra,[(0,s._)("div",ia,[na,(0,s._)("div",oa,[(0,s._)("table",ca,[ua,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ga.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id+new Date},[(0,s._)("td",null,(0,s.zw)(e.userId&&e.userId.email?e.userId.email:"N/A"),1),(0,s._)("td",ba,(0,s.zw)(e.requestedAt),1),(0,s._)("td",ma," 您申请了解的"+(0,s.zw)(e.requestedContactField)+"的区域联系人信息，目前已被"+(0,s.zw)(e.status),1),(0,s._)("td",_a,["DENIED"===e.status?((0,s.wg)(),(0,s.iD)("button",va," delete request ")):(0,s.kq)("",!0),"APPROVED"===e.status?((0,s.wg)(),(0,s.iD)("button",pa," view detail ")):(0,s.kq)("",!0)]),ya])))),128))])])])])):(0,s.kq)("",!0)])])])]))}},ga=l(3744);const fa=(0,ga.Z)(wa,[["__scopeId","data-v-3a8d4bb7"]]);var ha=fa}}]);
//# sourceMappingURL=710.b6d276b8.js.map