"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[552],{2965:function(e,a,l){l.r(a),l.d(a,{default:function(){return Ae}});var s=l(821),t=l(7386),r=l(3907);const d={class:"header"},i={class:"row"},n={class:"col-xl-4"},o={class:"row"},u={class:"card"},c={class:"card-body text-center"},_=(0,s._)("div",{class:"mb-3"},[(0,s._)("span",{class:"avatar avatar-xl rounded"})],-1),v={class:"card-title mb-1"},p={class:"text-secondary"},m={class:"form-fieldset"},w=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Change Password")],-1),b={class:"mb-3"},y=(0,s._)("label",{class:"form-label"},"New Password",-1),h={class:"mb-3"},g=(0,s._)("label",{class:"form-label"},"Confrim New Password",-1),k={class:"card-footer text-end"},f=["onSubmit"],q={class:"form-fieldset"},D=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Add user")],-1),U={class:"card-body"},x={class:"mb-3"},R=(0,s._)("label",{class:"form-label required"},"User name",-1),S={class:"mb-3"},E=(0,s._)("label",{class:"form-label required"},"Email address",-1),C={class:"mb-3"},I=(0,s._)("label",{class:"form-label required"},"Password",-1),A={class:"mb-3"},H=(0,s._)("label",{class:"form-label"},"Select Reader or Editor ",-1),P=(0,s._)("option",null,"Reader",-1),z=(0,s._)("option",null,"Editor",-1),N=(0,s._)("option",null,"Admin",-1),V=[P,z,N],T={class:"card-footer text-end"},Z=(0,s._)("div",{class:"card-footer text-end"},null,-1),O={key:0,class:"col-xl-8"},M={class:"card"},Y=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Recently Requests")],-1),F={class:"card-table table-responsive"},K={class:"table table-vcenter"},Q=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request User Name"),(0,s._)("th",null,"Request User Cluster & Title"),(0,s._)("th",null,"Request Data Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1),B={class:"text-secondary"},G={class:"text-secondary"},J={class:"text-secondary"},L=["onClick"],X=["onClick"],$=(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1),j={key:1,class:"col-xl-8"},W={class:"card"},ee=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Requests Feedback")],-1),ae={class:"card-table table-responsive"},le={class:"table table-vcenter"},se=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request Partner Name"),(0,s._)("th",null,"Request Time "),(0,s._)("th",null,"Request Partner Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1),te={class:"text-secondary"},re={class:"text-secondary"},de={class:"text-secondary"},ie={key:0},ne={key:1},oe=(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1),ue={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"passwordToast"},ce=(0,s.uE)('<div class="toast-header"><strong class="mr-auto">Notification</strong><button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close"><span aria-hidden="true"></span></button></div><div class="toast-body">Password updated successfully!</div>',2),_e=[ce],ve={key:0,class:"user-authentication"},pe={class:"card"},me=(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"user-authenticate")],-1),we={class:"card-body"},be={class:"table-responsive"},ye={class:"table mb-0"},he=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"User"),(0,s._)("th",null,"Role"),(0,s._)("th",null,"Action")])],-1),ge=(0,s._)("option",{value:"",disabled:""},"Select User",-1),ke=["value"],fe=(0,s._)("option",{value:"Reader"},"Reader",-1),qe=(0,s._)("option",{value:"Editor"},"Editor",-1),De=(0,s._)("option",{value:"Admin"},"Admin",-1),Ue=[fe,qe,De],xe=["value"],Re={key:1},Se=(0,s._)("td",null,[(0,s._)("select",{class:"form-select"},[(0,s._)("option",{value:"STATUS_CODE",selected:""},"Reader"),(0,s._)("option",{value:"JSON_BODY"},"Editor"),(0,s._)("option",{value:"HEADERS"},"Admin"),(0,s._)("option",{value:"TEXT_BODY"},"Text body")])],-1),Ee=(0,s._)("div",{class:"card-footer text-end"},[(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Make request")],-1);var Ce={__name:"Personal",setup(e){const a=(0,r.oR)(),l=(0,s.Fl)((()=>a.getters.user)),P=(0,s.iH)(""),z=(0,s.iH)(""),N=(0,s.iH)([]),ce=(0,s.iH)(""),fe=(0,s.iH)(""),qe=((0,s.iH)(""),(0,s.iH)("")),De=(0,s.iH)(""),Ce=(0,s.iH)(""),Ie=(0,s.iH)(""),Ae=(0,s.iH)([]);(0,s.bv)((async()=>{await He(),await Te(l)}));const He=async()=>{try{let{data:e}=await t.Z.get("/api/users");N.value=e}catch(e){}},Pe=()=>{P.value===z.value?t.Z.post("/api/users/edit-user/password",{newPassword:P.value}).then((e=>{console.log("password update successfully ")})).catch((e=>{console.log("failed to update password")})):alert("password not match")},ze=async()=>{try{await t.Z["delete"]("/api/users/delete/user",{data:{email:ce.value}}),await He(),ce=null}catch(e){console.log("error deleting user:",e)}},Ne=async()=>{try{await t.Z.put("/api/users/edit/role",{email:ce.value,updatedUserRole:fe.value}),await He()}catch(e){console.log("error editor user role:",e)}},Ve=async()=>{try{await t.Z.post("/api/users/register",{name:Ie.value,email:qe.value,password:De.value,identity:Ce.value}),await He()}catch(e){console.log("error add user ",e)}},Te=async e=>{try{if(console.log(e),"Super-Admin"===e.value.identity){let{data:e}=await t.Z.get("/api/accessQuests/all-requests",{params:{status:"PENDING"}});Ae.value=e,console.log(Ae)}else if("Sales"===e.value.identity||"Team-Leader"===e.value.identity){let{data:a}=await t.Z.get(`/api/accessQuests/user-requests/${e.value.id}`);Ae.value=a}console.log(Ae.value)}catch(a){console.log("error get request list",a)}},Ze=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"APPROVED"})}catch(a){console.log("error approve request",a)}},Oe=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"DENIED"})}catch(a){console.log("error approve request",a)}};return(e,a)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",d,[(0,s._)("div",i,[(0,s._)("div",n,[(0,s._)("div",o,[(0,s._)("div",u,[(0,s._)("div",c,[_,(0,s._)("div",v,(0,s.zw)((0,s.SU)(l).name),1),(0,s._)("div",p,(0,s.zw)((0,s.SU)(l).identity),1)])])]),(0,s._)("form",null,[(0,s._)("fieldset",m,[w,(0,s._)("div",b,[y,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"new password","onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e)},null,512),[[s.nr,P.value]])]),(0,s._)("div",h,[g,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"confrim new password","onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e)},null,512),[[s.nr,z.value]])])]),(0,s._)("div",k,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onClick:a[2]||(a[2]=e=>Pe())}," Change Password ")])]),"Super-Admin"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(Ve,["prevent"])},[(0,s._)("fieldset",q,[D,(0,s._)("div",U,[(0,s._)("div",x,[R,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"name",class:"form-control",placeholder:"Enter name","onUpdate:modelValue":a[3]||(a[3]=e=>Ie.value=e),required:""},null,512),[[s.nr,Ie.value]])])]),(0,s._)("div",S,[E,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":a[4]||(a[4]=e=>qe.value=e),required:""},null,512),[[s.nr,qe.value]])])]),(0,s._)("div",C,[I,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":a[5]||(a[5]=e=>De.value=e),required:""},null,512),[[s.nr,De.value]])])]),(0,s._)("div",A,[H,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=e=>Ce.value=e),required:""},V,512),[[s.bM,Ce.value]])])])]),(0,s._)("div",T,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:Ve}," Submit ",32)])]),Z],40,f)):(0,s.kq)("",!0)]),"Super-Admin"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",M,[Y,(0,s._)("div",F,[(0,s._)("table",K,[Q,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Ae.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id+new Date},[(0,s._)("td",null,(0,s.zw)(e.userId&&e.userId.email?e.userId.email:"user has been delete"),1),(0,s._)("td",B,(0,s.zw)(e.userId&&e.userId.Cluster?e.userId.Cluster:"user has been delete")+"&"+(0,s.zw)(e.userId&&e.userId.identity?e.userId.identity:"user has been delete"),1),(0,s._)("td",G,(0,s.zw)(e.userId&&e.userId.name?e.userId.name:"user has been delete")+"申请了解"+(0,s.zw)(e.partnerId.third_partner_name)+"的"+(0,s.zw)(e.requestedContactField)+"区域联系人信息 ",1),(0,s._)("td",J,[(0,s._)("button",{onClick:a=>Ze(e._id)}," approve request ",8,L),(0,s._)("button",{onClick:a=>Oe(e._id)}," deny request ",8,X)]),$])))),128))])])])])):(0,s.kq)("",!0),"Sales"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("div",j,[(0,s._)("div",W,[ee,(0,s._)("div",ae,[(0,s._)("table",le,[se,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Ae.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id+new Date},[(0,s._)("td",null,(0,s.zw)(e.userId&&e.userId.email?e.userId.email:"N/A"),1),(0,s._)("td",te,(0,s.zw)(e.requestedAt),1),(0,s._)("td",re," 您申请了解的"+(0,s.zw)(e.requestedContactField)+"的区域联系人信息，目前已被"+(0,s.zw)(e.status),1),(0,s._)("td",de,["DENIED"===e.status?((0,s.wg)(),(0,s.iD)("button",ie," delete request ")):(0,s.kq)("",!0),"APPROVED"===e.status?((0,s.wg)(),(0,s.iD)("button",ne," view detail ")):(0,s.kq)("",!0)]),oe])))),128))])])])])):(0,s.kq)("",!0)]),(0,s._)("div",ue,_e,512),"Super-Admin"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("div",ve,[(0,s.Uk)(" user-settings "),(0,s._)("div",pe,[me,(0,s._)("div",we,[(0,s._)("div",be,[(0,s._)("table",ye,[he,(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=e=>ce.value=e)},[ge,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,ke)))),128))],512),[[s.bM,ce.value]])]),(0,s._)("td",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>fe.value=e)},Ue,512),[[s.bM,fe.value]])]),(0,s._)("td",null,[ce.value&&fe.value?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:Ne}," change Role ")):(0,s.kq)("",!0)])]),(0,s._)("tr",null,[(0,s._)("td",null,[N.value.length>0?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,"onUpdate:modelValue":a[9]||(a[9]=e=>ce.value=e),class:"form-select"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,xe)))),128))],512)),[[s.bM,ce.value]]):((0,s.wg)(),(0,s.iD)("div",Re,"没有用户数据"))]),Se,(0,s._)("td",null,[ce.value?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:ze}," delete user ")):(0,s.kq)("",!0)])])])])])]),Ee])])):(0,s.kq)("",!0)])]))}};const Ie=Ce;var Ae=Ie}}]);
//# sourceMappingURL=552.a9c61c1b.js.map