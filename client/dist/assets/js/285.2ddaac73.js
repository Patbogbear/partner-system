"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[285],{8712:function(e,t,s){s.d(t,{Z:function(){return f}});s(7658);var o=s(8830),a=s(1120),r=s(821);const n=e=>((0,r.dD)("data-v-9522ce64"),e=e(),(0,r.Cn)(),e),i={"aria-live":"polite","aria-atomic":"true",style:{position:"relative","min-height":"200px"}},l={style:{position:"absolute",top:"0",right:"0"}},c={class:"toast-header"},d={class:"mr-auto"},u=n((()=>(0,r._)("small",{class:"text-muted"},"just now",-1))),m=n((()=>(0,r._)("span",{"aria-hidden":"true"},"×",-1))),p=[m];var g={__name:"ToastComponent",props:{message:{type:String,default:""},statusCode:{type:Number,default:200}},setup(e,{expose:t}){const s=e,o=(0,r.iH)(!1),a=(0,r.Fl)((()=>{switch(s.statusCode){case 200:return"alert-success";case 400:return"alert-warning";case 403:return"alert-secondary";case 404:return"alert-danger";case 500:return"alert-danger";default:return"alert-primary"}})),n=()=>{(0,r.Y3)((()=>{let e=document.querySelector(".toast"),t=new bootstrap.Toast(e);t.show(),o.value=!0}))},m=()=>{let e=document.querySelector(".toast"),t=new bootstrap.Toast(e);t.hide(),o.value=!1};return t({show:n,closeToast:m}),(t,s)=>((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[(0,r._)("div",{class:(0,r.C_)(["toast alert",(0,r.SU)(a)]),role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,r._)("div",c,[(0,r._)("strong",d,(0,r.zw)(e.message),1),u,(0,r._)("button",{type:"button",class:"ml-2 mb-1 close","data-dismiss":"toast",onClick:m,"aria-label":"Close"},p)])],2)])]))}},h=s(3744);const v=(0,h.Z)(g,[["__scopeId","data-v-9522ce64"]]);var b=v;function _(){const e=(e,t)=>{console.log("Inside showToast function");const s=document.createElement("div");document.body.appendChild(s);const o=(0,r.ri)(b,{message:e,statusCode:t}),a=o.mount(s);console.log("Toast added to body"),a&&"function"===typeof a.show&&a.show(),setTimeout((()=>{o.unmount(),document.body.removeChild(s),console.log("Toast removed from body")}),3e4)};return{showToast:e}}var y=_;o.Z.interceptors.request.use((e=>(localStorage.userToken&&(e.headers.Authorization=localStorage.userToken),e)),(e=>Promise.reject(e))),o.Z.interceptors.response.use((e=>{const{showToast:t}=y();return e.data&&e.data.message&&t(e.data.message,e.status),e}),(async e=>{const{showToast:t}=y();if(console.log("error response:",e.response),e.response){const{status:s,data:o}=e.response,r=o.message||o.error||"An error occurred.";401===s?(t("Token invalid. Please login again.",s,"error"),localStorage.removeItem("userToken"),a.Z.push("/login")):t(r,s)}else t("Network error. Please try again.","error");return Promise.reject(e)}));var f=o.Z},3744:function(e,t){t.Z=(e,t)=>{const s=e.__vccOpts||e;for(const[o,a]of t)s[o]=a;return s}},9285:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var o=s(821);const a=e=>((0,o.dD)("data-v-1c58b915"),e=e(),(0,o.Cn)(),e),r={class:"col-md-12 login"},n=a((()=>(0,o._)("div",{class:"login-image"},null,-1))),i=a((()=>(0,o._)("div",{class:"card-header"},[(0,o._)("h3",{class:"card-title"},"Login")],-1))),l={class:"card-body"},c={class:"mb-3"},d=a((()=>(0,o._)("label",{class:"form-label required"},"Email address",-1))),u=a((()=>(0,o._)("button",{type:"submit",class:"btn btn-primary"}," Click Reset Password ",-1))),m=a((()=>(0,o._)("small",null,"You should finish reset password in 30 mins After link been sent to your google account",-1))),p={class:"card-footer text-end"},g=a((()=>(0,o._)("span",{class:"p-1 text-primary-emphasis bs-primary-bg-subtle"},"Register here",-1)));function h(e,t,s,a,h,v){return(0,o.wg)(),(0,o.iD)("div",r,[n,(0,o._)("form",{class:"card",onSubmit:t[3]||(t[3]=(0,o.iM)((e=>v.Retrive()),["prevent"]))},[i,(0,o._)("div",l,[(0,o._)("div",c,[d,(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":t[0]||(t[0]=e=>h.email=e)},null,512),[[o.nr,h.email]])])]),u,m,h.notices?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:t[1]||(t[1]=(...e)=>v.gotoLogin&&v.gotoLogin(...e)),style:{color:"red"}},(0,o.zw)(h.notices)+",click here to login",1)):(0,o.kq)("",!0)]),(0,o._)("div",p,[(0,o._)("span",{class:"go_register",onClick:t[2]||(t[2]=e=>v.gotoRegister())},[(0,o.Uk)(" Does't have a account yet? "),g])])],32)])}s(7658);var v=s(8712),b={name:"retrive",components:{},data(){return{email:"",notices:""}},methods:{Retrive(){const e={email:this.email};v.Z.post("/api/users/reset-password",e).then((e=>{console.log("响应:",e.data),this.notices="Reset Password Email has been sent!"})).catch((e=>{console.error("错误:",e.response.data)}))},gotoRegister(){this.$router.push({path:"/register"})},gotoLogin(){this.$router.push({path:"/login"})}}},_=s(3744);const y=(0,_.Z)(b,[["render",h],["__scopeId","data-v-1c58b915"]]);var f=y}}]);
//# sourceMappingURL=285.2ddaac73.js.map