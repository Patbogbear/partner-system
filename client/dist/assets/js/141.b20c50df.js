"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[141],{5626:function(e,a,l){l.r(a),l.d(a,{default:function(){return ya}});var s=l(821),t=l(6828),d=l(3907);const r=e=>((0,s.dD)("data-v-77d70ced"),e=e(),(0,s.Cn)(),e),i={class:"header"},o={class:"row"},n={class:"col-xl-4"},c={class:"row"},u={class:"card"},m={class:"card-body text-center"},_=r((()=>(0,s._)("div",{class:"mb-3"},[(0,s._)("span",{class:"avatar avatar-xl rounded"})],-1))),b={class:"card-title mb-1"},v={class:"text-secondary"},p=r((()=>(0,s._)("div",null,null,-1))),y={class:"col-xl-8"},w={class:"row"},h=r((()=>(0,s._)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#modal-team"}," Change Password ",-1))),f={class:"modal modal-blur fade",id:"modal-team",tabindex:"-1",role:"dialog","aria-hidden":"true"},g={class:"modal-dialog modal-dialog-centered",role:"document"},k={class:"modal-content"},U={class:"modal-body"},q={class:"form-fieldset"},D=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Change Password"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),S={class:"mb-3"},x=r((()=>(0,s._)("label",{class:"form-label"},"New Password",-1))),C={class:"mb-3"},I=r((()=>(0,s._)("label",{class:"form-label"},"Confrim New Password",-1))),H={class:"card-footer text-end"},P=r((()=>(0,s._)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#addUser"}," Add User ",-1))),z={class:"modal modal-blur fade",id:"addUser",tabindex:"-1",role:"dialog","aria-hidden":"true"},A={class:"modal-dialog modal-dialog-centered",role:"document"},R={class:"modal-content"},V={class:"modal-body"},Z=["onSubmit"],E={class:"form-fieldset"},L=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Add user"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),N={class:"card-body"},T={class:"mb-3"},M=r((()=>(0,s._)("label",{class:"form-label required"},"User name",-1))),O={class:"mb-3"},F=r((()=>(0,s._)("label",{class:"form-label required"},"Email address",-1))),K={class:"mb-3"},Q=r((()=>(0,s._)("label",{class:"form-label required"},"Password",-1))),Y={class:"mb-3"},B=r((()=>(0,s._)("label",{class:"form-label"},"Sales Poc or Team-Leader",-1))),G=r((()=>(0,s._)("option",null,"Sales",-1))),J=r((()=>(0,s._)("option",null,"Pod-Leader",-1))),$=r((()=>(0,s._)("option",null,"Team-Leader",-1))),j=[G,J,$],W={class:"mb-3"},X=r((()=>(0,s._)("label",{class:"form-label"},"Cluster",-1))),ee=r((()=>(0,s._)("option",null,"SH",-1))),ae=r((()=>(0,s._)("option",null,"HZ",-1))),le=r((()=>(0,s._)("option",null,"BJ",-1))),se=[ee,ae,le],te={class:"card-footer text-end"},de=r((()=>(0,s._)("div",{class:"card-footer text-end"},null,-1))),re={class:"row"},ie=r((()=>(0,s._)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#deleteUser"}," Delete User ",-1))),oe={class:"modal modal-blur fade",id:"deleteUser",tabindex:"-1",role:"dialog","aria-hidden":"true"},ne={class:"modal-dialog modal-dialog-centered",role:"document"},ce={class:"modal-content"},ue={class:"modal-body"},me=["onSubmit"],_e={class:"form-fieldset"},be=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Delete user"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ve={class:"card-body"},pe={class:"mb-3"},ye=r((()=>(0,s._)("label",{class:"form-label"},"Select Users ",-1))),we=r((()=>(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),he=r((()=>(0,s._)("option",{disabled:""},"Select User",-1))),fe=["value"],ge={class:"card-footer text-end"},ke=r((()=>(0,s._)("div",{class:"card-footer text-end"},null,-1))),Ue=r((()=>(0,s._)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#userAuthenticate"}," User authenticate ",-1))),qe={class:"modal modal-blur fade",id:"userAuthenticate",tabindex:"-1",role:"dialog","aria-hidden":"true"},De={class:"modal-dialog modal-dialog-centered",role:"document"},Se={class:"modal-content"},xe={class:"modal-body"},Ce=["onSubmit"],Ie={class:"form-fieldset"},He=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"User authenticate")],-1))),Pe={class:"card-body"},ze={class:"mb-3"},Ae=r((()=>(0,s._)("label",{class:"form-label"},"Select Users ",-1))),Re=r((()=>(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),Ve=r((()=>(0,s._)("option",{disabled:""},"Select User",-1))),Ze=["value"],Ee=r((()=>(0,s._)("label",{class:"form-label"},"Select Role",-1))),Le=r((()=>(0,s._)("option",{value:"Sales"},"Sales",-1))),Ne=r((()=>(0,s._)("option",{value:"Pod-Leader"},"Pod-Leader",-1))),Te=r((()=>(0,s._)("option",{value:"Team-Leader"}," Team-Leader ",-1))),Me=[Le,Ne,Te],Oe={class:"card-footer text-end"},Fe=r((()=>(0,s._)("div",{class:"card-footer text-end"},null,-1))),Ke={key:0,class:"col-xl-12"},Qe={class:"card"},Ye=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Recently Requests")],-1))),Be={class:"card-table table-responsive"},Ge={class:"table table-vcenter"},Je=r((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request User Name"),(0,s._)("th",null,"Request User Cluster & Title"),(0,s._)("th",null,"Request Data Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1))),$e={class:"text-secondary"},je={class:"text-secondary"},We={class:"text-secondary"},Xe=["onClick"],ea=["onClick"],aa=r((()=>(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1))),la={key:1,class:"col-xl-12"},sa={class:"card"},ta=r((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},"Requests Feedback")],-1))),da={class:"card-table table-responsive"},ra={class:"table table-vcenter"},ia=r((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Request Partner Name"),(0,s._)("th",null,"Request Time"),(0,s._)("th",null,"Request Partner Description"),(0,s._)("th",{colspan:"2"},"Actions")])],-1))),oa={class:"text-secondary"},na={class:"text-secondary"},ca={class:"text-secondary"},ua={key:0},ma={key:1},_a=r((()=>(0,s._)("td",{class:"text-end w-1"},[(0,s._)("div",{class:"chart-sparkline chart-sparkline-sm",id:"sparkline-bounce-rate-1"})],-1)));var ba={__name:"Personal",setup(e){const a=(0,d.oR)(),l=(0,s.Fl)((()=>a.getters.user)),r=(0,s.iH)(""),G=(0,s.iH)(""),J=(0,s.iH)([]),$=(0,s.iH)(""),ee=(0,s.iH)(""),ae=(0,s.iH)(""),le=((0,s.iH)(""),(0,s.iH)("")),Le=(0,s.iH)(""),Ne=(0,s.iH)(""),Te=(0,s.iH)(""),ba=(0,s.iH)(""),va=(0,s.iH)([]);(0,s.bv)((async()=>{await pa(),await ga(l)}));const pa=async()=>{try{let{data:e}=await t.Z.get("/api/users");J.value=e}catch(e){}},ya=()=>{r.value===G.value?t.Z.post("/api/users/edit-user/password",{newPassword:r.value}).then((e=>{console.log("password update successfully ")})).catch((e=>{console.log("failed to update password")})):alert("password not match")},wa=async()=>{try{await t.Z["delete"]("/api/users/delete/user",{data:{email:ae.value}}),await pa(),ae=null}catch(e){console.log("error deleting user:",e)}},ha=async()=>{try{await t.Z.put("/api/users/edit/role",{email:$.value,updatedUserRole:ee.value}),await pa()}catch(e){console.log("error editor user role:",e)}},fa=async()=>{try{await t.Z.post("/api/users/register",{name:Te.value,email:le.value,password:Le.value,cluster:ba.value,identity:Ne.value}),await pa()}catch(e){console.log("error add user ",e)}},ga=async e=>{try{if("Super-Admin"===e.value.identity){let{data:e}=await t.Z.get("/api/accessQuests/all-requests",{params:{status:"PENDING"}});va.value=e,console.log(va)}else if("Sales"===e.value.identity||"Team-Leader"===e.value.identity){let{data:a}=await t.Z.get(`/api/accessQuests/user-requests/${e.value.id}`);va.value=a}}catch(a){console.log("error get request list",a)}},ka=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"APPROVED"})}catch(a){console.log("error approve request",a)}},Ua=async e=>{try{await t.Z.put("/api/accessQuests/all-requests/"+e,{status:"DENIED"})}catch(a){console.log("error approve request",a)}};return(e,a)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",i,[(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("div",m,[_,(0,s._)("div",b,(0,s.zw)((0,s.SU)(l).name),1),(0,s._)("div",v,(0,s.zw)((0,s.SU)(l).identity),1),p])])])]),(0,s._)("div",y,[(0,s._)("div",w,[h,(0,s._)("div",f,[(0,s._)("div",g,[(0,s._)("div",k,[(0,s._)("div",U,[(0,s._)("form",null,[(0,s._)("fieldset",q,[D,(0,s._)("div",S,[x,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"new password","onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e)},null,512),[[s.nr,r.value]])]),(0,s._)("div",C,[I,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"confrim new password","onUpdate:modelValue":a[1]||(a[1]=e=>G.value=e)},null,512),[[s.nr,G.value]])])]),(0,s._)("div",H,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onClick:a[2]||(a[2]=e=>ya())}," Change Password ")])])])])])]),P,(0,s._)("div",z,[(0,s._)("div",A,[(0,s._)("div",R,[(0,s._)("div",V,["Super-Admin"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(fa,["prevent"])},[(0,s._)("fieldset",E,[L,(0,s._)("div",N,[(0,s._)("div",T,[M,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"name",class:"form-control",placeholder:"Enter name","onUpdate:modelValue":a[3]||(a[3]=e=>Te.value=e),required:""},null,512),[[s.nr,Te.value]])])]),(0,s._)("div",O,[F,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":a[4]||(a[4]=e=>le.value=e),required:""},null,512),[[s.nr,le.value]])])]),(0,s._)("div",K,[Q,(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":a[5]||(a[5]=e=>Le.value=e),required:""},null,512),[[s.nr,Le.value]])])]),(0,s._)("div",Y,[B,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=e=>Ne.value=e),required:""},j,512),[[s.bM,Ne.value]])])]),(0,s._)("div",W,[X,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=e=>ba.value=e),required:""},se,512),[[s.bM,ba.value]])])])]),(0,s._)("div",te,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:fa}," Add User ",32)])]),de],40,Z)):(0,s.kq)("",!0)])])])]),(0,s._)("div",re,[ie,(0,s._)("div",oe,[(0,s._)("div",ne,[(0,s._)("div",ce,[(0,s._)("div",ue,["Super-Admin"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(wa,["prevent"])},[(0,s._)("fieldset",_e,[be,(0,s._)("div",ve,[(0,s._)("div",pe,[ye,we,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>ae.value=e)},[he,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(J.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,fe)))),128))],512),[[s.bM,ae.value]])])])]),(0,s._)("div",ge,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:wa}," Delete User ",32)])]),ke],40,me)):(0,s.kq)("",!0)])])])]),Ue,(0,s._)("div",qe,[(0,s._)("div",De,[(0,s._)("div",Se,[(0,s._)("div",xe,["Super-Admin"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,s.iM)(ha,["prevent"])},[(0,s._)("fieldset",Ie,[He,(0,s._)("div",Pe,[(0,s._)("div",ze,[Ae,Re,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[9]||(a[9]=e=>$.value=e)},[Ve,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(J.value,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.email},(0,s.zw)(e.email),9,Ze)))),128))],512),[[s.bM,$.value]])]),Ee,(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[10]||(a[10]=e=>ee.value=e)},Me,512),[[s.bM,ee.value]])])])]),(0,s._)("div",Oe,[(0,s._)("button",{type:"submit",class:"btn btn-primary",onOnclick:ha}," Change Role ",32)])]),Fe],40,Ce)):(0,s.kq)("",!0)])])])])])])]),"Super-Admin"===(0,s.SU)(l).identity||"Team-Leader"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("div",Ke,[(0,s._)("div",Qe,[Ye,(0,s._)("div",Be,[(0,s._)("table",Ge,[Je,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(va.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id+new Date},[(0,s._)("td",null,(0,s.zw)(e.userId&&e.userId.email?e.userId.email:"user has been delete"),1),(0,s._)("td",$e,(0,s.zw)(e.userId&&e.userId.Cluster?e.userId.Cluster:"user has been delete")+"&"+(0,s.zw)(e.userId&&e.userId.identity?e.userId.identity:"user has been delete"),1),(0,s._)("td",je,(0,s.zw)(e.userId&&e.userId.name?e.userId.name:"user has been delete")+"申请了解"+(0,s.zw)(e.partnerId?e.partnerId.third_partner_name:"unknown partner")+"的"+(0,s.zw)(e.requestedContactField)+"区域联系人信息 ",1),(0,s._)("td",We,[(0,s._)("button",{class:"btn",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"},onClick:a=>ka(e._id)}," approve request ",8,Xe),(0,s._)("button",{class:"btn",style:{"--bs-btn-padding-y":"0.25rem","--bs-btn-padding-x":"0.5rem","--bs-btn-font-size":"0.75rem"},onClick:a=>Ua(e._id)}," deny request ",8,ea)]),aa])))),128))])])])])):(0,s.kq)("",!0),"Sales"===(0,s.SU)(l).identity||"Team-Leader"===(0,s.SU)(l).identity?((0,s.wg)(),(0,s.iD)("div",la,[(0,s._)("div",sa,[ta,(0,s._)("div",da,[(0,s._)("table",ra,[ia,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(va.value,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id+new Date},[(0,s._)("td",null,(0,s.zw)(e.userId&&e.userId.email?e.userId.email:"N/A"),1),(0,s._)("td",oa,(0,s.zw)(e.requestedAt),1),(0,s._)("td",na," 您申请了解的"+(0,s.zw)(e.requestedContactField)+"的区域联系人信息，目前已被"+(0,s.zw)(e.status),1),(0,s._)("td",ca,["DENIED"===e.status?((0,s.wg)(),(0,s.iD)("button",ua," delete request ")):(0,s.kq)("",!0),"APPROVED"===e.status?((0,s.wg)(),(0,s.iD)("button",ma," view detail ")):(0,s.kq)("",!0)]),_a])))),128))])])])])):(0,s.kq)("",!0)])])]))}},va=l(3744);const pa=(0,va.Z)(ba,[["__scopeId","data-v-77d70ced"]]);var ya=pa}}]);
//# sourceMappingURL=141.b20c50df.js.map